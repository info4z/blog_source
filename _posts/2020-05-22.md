---
title: 并发编程工具类
date: 2020-05-22
categories:
- 高性能编程
tags: 
- 多线程并发编程
- J.U.C并发编程包
---



# 一 : 

## (二) 工具类拓展 - 信号量和栅栏和倒计数器

### 1: Semaphore

- 又称**信号量**, 控制多个线程争抢许可
- API
  - acquire : 获取一个许可, 如果没有就等待
  - release : 释放一个许可
  - availablePermits : 方法得到可用的数目
- 经典场景 : 代码并发处理限流

### 2: CountDownLatch

- java1.5 被引入的一个工具类, 常被成为**倒计数器**; 创建对象时, 传入指定数值作为线程参与的数量
- API
  - await : 方法等待计数器值变为 0, 在这之前, 线程进入等待状态
  - countdown : 计数器数值减一, 直到为 0
- 适用场景 : 经常用于等待其他线程执行到某一节点, 再继续执行当前线程代码
- 示例
  1. 统计线程执行情况
  2. 压力测试中, 使用 countDownLatch 实现最大程度的并发处理
  3. 多线程之间, 相互通信, 比如线程异步调用完接口, 结果通知

### 3: CyclicBarrier

- java1.5 加入的, 又称为**线程栅栏**; 创建对象时, 指定展览线程数量
- API
  - await : 等指定数量的线程都处于等待状态时, 继续执行后续代码
  - barrierAction : 线程数量到了指定量之后, 自动出发执行指定任务
- 和 CountDownLatch 重要区别在于, CyclicBarrier 对象可以多次出发执行
- 经典场景:
  1. 数据量比较大时, 实现批量插入数据到数据库
  2. 数据统计, 30 个线程统计 30 天数据, 全部统计完毕后, 执行汇总